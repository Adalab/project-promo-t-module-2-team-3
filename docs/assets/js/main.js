"use strict";const designContainer=document.querySelector(".js_design_container"),fillContainer=document.querySelector(".js_fill_container"),shareContainer=document.querySelector(".js_share_container"),rotateDesign=document.querySelector(".js-rotate-design"),rotateFill=document.querySelector(".js-rotate-fill"),rotateShare=document.querySelector(".js-rotate-share"),collapseHeader=document.querySelectorAll(".js_collapse_header"),collapseContainer=document.querySelectorAll(".js_collapse_container"),collapseParent=document.querySelectorAll(".js_collapse_parent"),radio1=document.querySelector(".js_radio1"),radio2=document.querySelector(".js_radio2"),radio3=document.querySelector(".js_radio3"),radio=document.querySelectorAll(".radio__check"),inputName=document.querySelector(".js_input_name"),inputJob=document.querySelector(".js_input_job"),inputEmail=document.querySelector(".js_input_email"),inputTel=document.querySelector(".js_input_tel"),inputLinkedin=document.querySelector(".js_input_linkedin"),inputGithub=document.querySelector(".js_input_github"),previewCard=document.querySelector(".js_preview__card"),previewName=document.querySelector(".card__info--name"),previewJob=document.querySelector(".card__info--job"),previewPhoto=document.querySelector(".js__profile-preview"),previewEmail=document.querySelector(".rrss__link--email"),previewTel=document.querySelector(".rrss__link--tel"),createButton=document.querySelector(".js_createbutton"),sectionShare=document.querySelector(".js_share_section"),createError=document.querySelector(".js-create-error"),previewLinkedin=document.querySelector(".rrss__link--linkedin"),previewGithub=document.querySelector(".rrss__link--github"),form=document.querySelector(".js_form"),resetButton=document.getElementById("reset"),cardName=document.querySelector(".js_card-name"),cardJob=document.querySelector(".js_card-job"),cardURL=document.querySelector(".js_card-link"),fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");let dataPreview={palette:"",name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:""};const img=document.querySelector(".js_preview_container"),twitterURL=document.querySelector(".js_twitter-link"),designLegend=document.querySelector(".js_design_legend"),fillLegend=document.querySelector(".js_fill_legend"),shareLegend=document.querySelector(".js_share_legend");function rotateArrow(e){designContainer.classList.contains("collapsed")?rotateDesign.classList.remove("rotate"):rotateDesign.classList.add("rotate"),fillContainer.classList.contains("collapsed")?rotateFill.classList.remove("rotate"):rotateFill.classList.add("rotate"),shareContainer.classList.contains("collapsed")?rotateShare.classList.remove("rotate"):rotateShare.classList.add("rotate")}function handlerClickHeader(e){const t=e.currentTarget.parentNode;for(let e=0;e<collapseParent.length;e++)collapseParent[e]===t?(collapseContainer[e].classList.remove("collapsed"),rotateArrow()):(collapseContainer[e].classList.add("collapsed"),rotateArrow())}rotateArrow();for(const e of collapseHeader)e.addEventListener("click",handlerClickHeader);function handleClickRadio1(e){previewCard.classList.remove("palette2","palette3"),previewCard.classList.add("palette1")}function handleClickRadio2(e){previewCard.classList.remove("palette1","palette3"),previewCard.classList.add("palette2")}function handleClickRadio3(e){previewCard.classList.remove("palette1","palette2"),previewCard.classList.add("palette3")}const radioCont=document.querySelector(".main__box");function handleClickRadio(e){e.target.parentNode.classList.contains("js_radio-one")?(handleClickRadio1(),radio1.checked=!0):e.target.parentNode.classList.contains("js_radio-two")?(handleClickRadio2(),radio2.checked=!0):e.target.parentNode.classList.contains("js_radio-three")&&(handleClickRadio3(),radio3.checked=!0)}function renderCard(e){previewName.innerHTML=e.name||"Nombre Apellido",previewJob.innerHTML=e.job||"Front-end developer",previewEmail.href="Mailto:"+e.email,previewTel.href="Tel:"+e.phone,previewLinkedin.href="https://www."+e.linkedin,previewGithub.href="https://github.com/"+e.github}function handleInputs(e){const t=e.target.id,r=e.target.value;if(console.log(t,r),"name"===t)dataPreview.name=r;else if("job"===t)dataPreview.job=r;else if("email"===t)dataPreview.email=r;else if("tel"===t)dataPreview.phone=r;else if("linkedin"===t)dataPreview.linkedin=r;else if("github"===t){const e=r.slice(1);dataPreview.github=e}else"photo"===t?dataPreview.photo=r:t.includes("option")&&(dataPreview.palette=r);renderCard(dataPreview),localStorage.setItem("dataPreview",JSON.stringify(dataPreview))}function handleCreateButton(e){e.preventDefault(),fetch("https://dev.adalab.es/api/card/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(dataPreview)}).then(e=>e.json()).then(e=>{e.success?(sectionShare.classList.remove("collapsed"),cardURL.innerHTML=e.cardURL,cardURL.href=e.cardURL,twitterURL.href="https://twitter.com/intent/tweet?text="+e.cardURL,createButton.setAttribute("disabled",!0),createButton.classList.remove("share__create--button"),createButton.classList.add("button__disabled")):createError.innerHTML="Rellena todos los campos obligatorios"}),console.log(dataPreview)}function checkLS(){const e=JSON.parse(localStorage.getItem("dataPreview")),t=document.querySelector(".js_input_name"),r=document.querySelector(".js_input_job"),a=document.querySelector(".js_input_email"),o=document.querySelector(".js_input_tel"),n=document.querySelector(".js_input_linkedin"),i=document.querySelector(".js_input_github");e?(renderCard(e),t.value=e.name,r.value=e.job,a.value=e.email,o.value=e.phone,n.value=e.linkedin,i.value=e.github,profileImage.style.backgroundImage=e.photo,form.addEventListener("input",handleInputs)):form.addEventListener("input",handleInputs)}radioCont.addEventListener("click",handleClickRadio),checkLS(),createButton.addEventListener("click",handleCreateButton);const handleClickReset=e=>{e.preventDefault();const t=document.querySelector(".js_radio1"),r=document.querySelector(".js_preview__card");designContainer.classList.remove("collapsed"),fillContainer.classList.add("collapsed"),shareContainer.classList.add("collapsed"),t.checked=!0,r.classList.add("palette1"),r.classList.remove("palette2"),r.classList.remove("palette3"),inputName.value="",inputJob.value="",inputEmail.value="",inputLinkedin.value="",inputTel.value="",inputGithub.value="",profileImage.style="",dataPreview={palette:"",name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:""},img.style="",cardName.innerHTML="Nombre Apellido",cardJob.innerHTML="Front-end developer",previewEmail.href="",previewTel.href="",previewLinkedin.href="",previewGithub.href="",localStorage.setItem("dataPreview",JSON.stringify(dataPreview)),rotateArrow()};function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,img.style.backgroundImage=`url(${fr.result})`,dataPreview.photo=fr.result}resetButton.addEventListener("click",handleClickReset),form.addEventListener("keyup",handleInputs),fileField.addEventListener("change",getImage);